<section class="py-16 bg-white" id="contact">
  <div class="max-w-3xl mx-auto px-6">
    <!-- Heading -->
    <h2 class="text-6xl font-bold text-center text-gray-800 uppercase mb-6">Agregar Pokémon</h2>

    <!-- Icon Divider -->
    <div class="flex items-center justify-center mb-10">
      <div class="w-16 h-px bg-gray-400"></div>
      <div class="mx-4 text-gray-500 text-xl"><i class="fas fa-star"></i></div>
      <div class="w-16 h-px bg-gray-400"></div>
    </div>

    <!-- Form -->
    <form id="addPokemonForm" action="{% url 'add_pokemon' %}" method="post" class="space-y-6" onsubmit="return handleFormSubmit(this)">
      {% csrf_token %}

      <!-- Nombre de Pokemon -->
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700">Nombre del Pokémon</label>
        <input type="text" id="name" name="name" placeholder="Nombre del Pokémon" class="mt-1 w-full px-5 py-3 text-lg rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500" required />
      </div>

      <!-- Tipo de Pokemon -->
      <div>
        <label for="type" class="block text-sm font-medium text-gray-700">Tipo</label>
        <input type="text" id="type" name="type" placeholder="Tipo del Pokémon" class="mt-1 w-full px-5 py-3 text-lg rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500" required />
      </div>

      <!-- Imagen (URL) -->
      <div>
        <label for="image" class="block text-sm font-medium text-gray-700">Imagen (URL)</label>
        <input type="text" id="image" name="image" placeholder="URL de la imagen" class="mt-1 w-full px-5 py-3 text-lg rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500" required />
      </div>

      <!-- Submit -->
      <div class="text-center">
        <button type="submit" class="px-6 py-3 bg-teal-600 text-white font-semibold rounded-md hover:bg-teal-700 transition-all duration-300">Guardar Pokémon</button>
      </div>

    </form>
  </div>
</section>

<!-- Script para validación -->
<script>
  function validateForm() {
    const name = document.querySelector('input[name="name"]').value.trim();
    const type = document.querySelector('input[name="type"]').value.trim();
    const image = document.querySelector('input[name="image"]').value.trim();

    if (!name || !type || !image) {
      alert("Por favor, completa todos los campos.");
      return false;
    }

    // Validación básica de URL
    const urlPattern = /^(https?:\/\/.*\.(?:png|jpg|jpeg|gif|webp))$/i;
    if (!urlPattern.test(image)) {
      alert("Por favor, ingresa una URL válida para la imagen.");
      return false;
    }

    return true;
  }

  function showAddingMessage(form) {
    const message = document.createElement('div');
    message.innerText = 'Agregando Pokémon...';
    message.className = 'fixed top-5 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 px-4 py-2 rounded shadow z-50';
    document.body.appendChild(message);

    setTimeout(() => {
      form.submit();
    }, 150);
  }

  function handleFormSubmit(form) {
    if (!validateForm()) {
      return false;
    }

    showAddingMessage(form);
    return false; // Previene envío inmediato, lo hace showAddingMessage
  }
  
</script>